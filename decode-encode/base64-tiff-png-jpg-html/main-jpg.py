
#------------------------------------------------------------------------------
# decode from base64 to jpg
#------------------------------------------------------------------------------

import base64

html = '<img src="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/4QM8RXhpZgAASUkqAAgAAAAJAAABCQABAAAACgAAAAEBCQABAAAACgAAABIBCQABAAAAAQAAABoBCQABAAAASAAAABsBCQABAAAASAAAACgBCQABAAAAAgAAADIBAgAUAAAAegAAABMCCQABAAAAAQAAAGmHBAABAAAAjgAAANwAAAAyMDE5OjA5OjA3IDAzOjM0OjI0AAYAAJAHAAQAAAAwMjIxAZEHAAQAAAABAgMAAKAHAAQAAAAwMTAwAaAJAAEAAAABAAAAAqAJAAEAAAAKAAAAA6AJAAEAAAAKAAAAAAAAAAYAAwEDAAEAAAAGAAAAGgEJAAEAAABIAAAAGwEJAAEAAABIAAAAKAEJAAEAAAACAAAAAQIEAAEAAAAqAQAAAgIEAAEAAAAJAgAAAAAAAP/Y/+AAEEpGSUYAAQEAAAEAAQAA/9sAQwACAQEBAQECAQEBAgICAgIEAwICAgIFBAQDBAYFBgYGBQYGBgcJCAYHCQcGBggLCAkKCgoKCgYICwwLCgwJCgoK/9sAQwECAgICAgIFAwMFCgcGBwoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoK/8AAEQgACgAKAwEiAAIRAQMRAf/EABcAAAMBAAAAAAAAAAAAAAAAAAAICQr/xAAeEAACAgMBAQEBAAAAAAAAAAADBAIFAQYHCAkKAP/EABQBAQAAAAAAAAAAAAAAAAAAAAD/xAAUEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwBreIO/LnqPAucdY9vi84XnaOgcv0baNhD2DkK9zum3WdgqCwsyV42SYbuxNhZhX1q9YAgEWVpJgGxhbFYvKH27+hb7F+WvaHXvMfFfaVgjpvOeoX+r6klbalS2zS9ZX2J1FRmefSM24WIRDxJhkpTlljMyEnOUpZP0Le3faHlr7F9p4r5j9d9Q5zpqNhUvpaloe/2NRWLtP0qD7zEFVDDFArDjTLRp4jiRTsFLPMpklLOp3U9T1XQtVrNF0XWa+lpKWvChTU1SlBZVBUMMDEuEQ8YgIUIRjCMI4xGMY4xjGMY/g//ZAP/bAEMAAgEBAQEBAgEBAQICAgICBAMCAgICBQQEAwQGBQYGBgUGBgYHCQgGBwkHBgYICwgJCgoKCgoGCAsMCwoMCQoKCv/bAEMBAgICAgICBQMDBQoHBgcKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCv/AABEIAAoACgMBIgACEQEDEQH/xAAXAAADAQAAAAAAAAAAAAAAAAAACAkK/8QAHhAAAgIDAQEBAQAAAAAAAAAAAwQCBQEGBwgJCgD/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/8QAFBEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEQMRAD8Aa3iDvy56jwLnHWPb4vOF52joHL9G2jYQ9g5Cvc7pt1nYKgsLMleNkmG7sTYWYV9avWAIBFlaSYBsYWxWLyh9u/oW+xflr2h17zHxX2lYI6bznqF/q+pJW2pUts0vWV9idRUZnn0jNuFiEQ8SYZKU5ZYzMhJzlKWT9C3t32h5a+xfaeK+Y/XfUOc6ajYVL6WpaHv9jUVi7T9Kg+8xBVQwxQKw40y0aeI4kU7BSzzKZJSzqd1PU9V0LVazRdF1mvpaSlrwoU1NUpQWVQVDDAxLhEPGICFCEYwjCOMRjGOMYxjGP4P/2Q==">'

data_base64 = html.split('base64,')[1] # remove text before encoded data
data_base64 = data_base64[:-2]         # remove text after encoded data

#data_base64 = '/9j/4AAQSkZJRgABAQAAAQABAAD/4QM8RXhpZgAASUkqAAgAAAAJAAABCQABAAAACgAAAAEBCQABAAAACgAAABIBCQABAAAAAQAAABoBCQABAAAASAAAABsBCQABAAAASAAAACgBCQABAAAAAgAAADIBAgAUAAAAegAAABMCCQABAAAAAQAAAGmHBAABAAAAjgAAANwAAAAyMDE5OjA5OjA3IDAzOjM0OjI0AAYAAJAHAAQAAAAwMjIxAZEHAAQAAAABAgMAAKAHAAQAAAAwMTAwAaAJAAEAAAABAAAAAqAJAAEAAAAKAAAAA6AJAAEAAAAKAAAAAAAAAAYAAwEDAAEAAAAGAAAAGgEJAAEAAABIAAAAGwEJAAEAAABIAAAAKAEJAAEAAAACAAAAAQIEAAEAAAAqAQAAAgIEAAEAAAAJAgAAAAAAAP/Y/+AAEEpGSUYAAQEAAAEAAQAA/9sAQwACAQEBAQECAQEBAgICAgIEAwICAgIFBAQDBAYFBgYGBQYGBgcJCAYHCQcGBggLCAkKCgoKCgYICwwLCgwJCgoK/9sAQwECAgICAgIFAwMFCgcGBwoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoK/8AAEQgACgAKAwEiAAIRAQMRAf/EABcAAAMBAAAAAAAAAAAAAAAAAAAICQr/xAAeEAACAgMBAQEBAAAAAAAAAAADBAIFAQYHCAkKAP/EABQBAQAAAAAAAAAAAAAAAAAAAAD/xAAUEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwBreIO/LnqPAucdY9vi84XnaOgcv0baNhD2DkK9zum3WdgqCwsyV42SYbuxNhZhX1q9YAgEWVpJgGxhbFYvKH27+hb7F+WvaHXvMfFfaVgjpvOeoX+r6klbalS2zS9ZX2J1FRmefSM24WIRDxJhkpTlljMyEnOUpZP0Le3faHlr7F9p4r5j9d9Q5zpqNhUvpaloe/2NRWLtP0qD7zEFVDDFArDjTLRp4jiRTsFLPMpklLOp3U9T1XQtVrNF0XWa+lpKWvChTU1SlBZVBUMMDEuEQ8YgIUIRjCMI4xGMY4xjGMY/g//ZAP/bAEMAAgEBAQEBAgEBAQICAgICBAMCAgICBQQEAwQGBQYGBgUGBgYHCQgGBwkHBgYICwgJCgoKCgoGCAsMCwoMCQoKCv/bAEMBAgICAgICBQMDBQoHBgcKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCv/AABEIAAoACgMBIgACEQEDEQH/xAAXAAADAQAAAAAAAAAAAAAAAAAACAkK/8QAHhAAAgIDAQEBAQAAAAAAAAAAAwQCBQEGBwgJCgD/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/8QAFBEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEQMRAD8Aa3iDvy56jwLnHWPb4vOF52joHL9G2jYQ9g5Cvc7pt1nYKgsLMleNkmG7sTYWYV9avWAIBFlaSYBsYWxWLyh9u/oW+xflr2h17zHxX2lYI6bznqF/q+pJW2pUts0vWV9idRUZnn0jNuFiEQ8SYZKU5ZYzMhJzlKWT9C3t32h5a+xfaeK+Y/XfUOc6ajYVL6WpaHv9jUVi7T9Kg+8xBVQwxQKw40y0aeI4kU7BSzzKZJSzqd1PU9V0LVazRdF1mvpaSlrwoU1NUpQWVQVDDAxLhEPGICFCEYwjCOMRjGOMYxjGP4P/2Q=='

data_base64 = data_base64.encode()   # convert string to bytes
data = base64.b64decode(data_base64) # decode from base64 (bytes)
open('output-image.jpg', 'wb').write(data)  # write bytes to file



#------------------------------------------------------------------------------
# encode jpg to base64 and embed in html
#------------------------------------------------------------------------------

import base64

data = open('image.jpg', 'rb').read() # read bytes from file
data_base64 = base64.b64encode(data)  # encode to base64 (bytes)
data_base64 = data_base64.decode()    # convert bytes to string

print(data_base64)

html = '<img src="data:image/jpeg;base64,' + data_base64 + '">' # embed in html
open('output-jpg.html', 'w').write(html)
